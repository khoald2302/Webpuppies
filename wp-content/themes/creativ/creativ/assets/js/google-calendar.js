function handleAuthResult(e){e&&!e.error&&insertCalendarApi()}function insertCalendarApi(){gapi.client.load("calendar","v3",insertEvents)}function insertEvents(){var e=document.getElementById("calendar-event"),t=jstz.determine(),n={summary:e.dataset.title,location:e.dataset.location,description:e.dataset.summary,start:{dateTime:e.dataset.start,timeZone:t.name()},end:{dateTime:e.dataset.end,timeZone:t.name()}},a=gapi.client.calendar.events.insert({calendarId:"primary",resource:n});a.execute(function(t){var n='<div class="alert alert-success"><strong>Success!</strong> <a href="'+t.htmlLink+'" target="_blank">Click here to view event</a></div>';e.innerHTML=n})}var CLIENT_ID=GoogleAPI.calendar,SCOPES=["https://www.googleapis.com/auth/calendar"],eventButton=document.getElementById("btn-calendar-event");eventButton.onclick=function(){return gapi.auth.authorize({client_id:CLIENT_ID,scope:SCOPES,immediate:!1},handleAuthResult),!1};